<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Fun Slot Machine with Rat!</title>
<style>
  body {
    background: linear-gradient(135deg, #222, #444);
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color: white;
    text-align: center;
    padding: 20px;
    user-select: none;
  }
  h1 {
    margin-bottom: 0;
  }
  #balance {
    font-size: 1.5em;
    margin: 10px 0 30px;
  }
  #slot-machine {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-bottom: 30px;
  }
  .reel {
    width: 100px;
    height: 100px;
    background: #111;
    border-radius: 15px;
    box-shadow: inset 0 0 10px #0af;
    font-size: 70px;
    line-height: 100px;
    user-select: none;
    transition: background 0.3s;
  }
  .reel.winning {
    background: gold;
    color: #222;
    box-shadow: 0 0 15px 5px gold;
  }
  #spin-btn {
    padding: 15px 30px;
    font-size: 1.3em;
    background: #0af;
    border: none;
    border-radius: 12px;
    color: white;
    cursor: pointer;
    transition: background 0.3s;
  }
  #spin-btn:disabled {
    background: #555;
    cursor: not-allowed;
  }
  #message {
    margin-top: 25px;
    font-size: 1.3em;
    min-height: 1.5em;
  }
  /* Rat image in bottom-right */
  #rat-corner {
    position: fixed;
    bottom: 10px;
    right: 10px;
    width: 100px;
    user-select: none;
    cursor: pointer;
    transition: transform 0.3s ease;
    opacity: 0.8;
    z-index: 9999;
  }
  #rat-corner:hover {
    transform: rotate(15deg) scale(1.1);
    opacity: 1;
  }
  /* Wiggle animation for rat */
  @keyframes wiggle {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(10deg); }
    50% { transform: rotate(-10deg); }
    75% { transform: rotate(10deg); }
  }
  #rat-corner.wiggle {
    animation: wiggle 0.6s ease infinite;
  }
</style>
</head>
<body>

<h1>üé∞ Fun Slot Machine üé∞</h1>
<div id="balance">Balance: $100</div>

<div id="slot-machine">
  <div class="reel" id="reel1">üçí</div>
  <div class="reel" id="reel2">üçã</div>
  <div class="reel" id="reel3">üçä</div>
</div>

<button id="spin-btn">Spin üé≤ ($10)</button>

<div id="message"></div>

<!-- Rat image -->
<img src="https://i.imgur.com/kYqvR8U.png" alt="Cute Rat" id="rat-corner" title="Good luck!" />

<script>
(() => {
  const balanceDisplay = document.getElementById('balance');
  const spinBtn = document.getElementById('spin-btn');
  const message = document.getElementById('message');
  const rat = document.getElementById('rat-corner');

  let balance = 100;
  const spinCost = 10;

  // Slot symbols and their payout multipliers
  const symbols = [
    {emoji: 'üçí', payout: 2},
    {emoji: 'üçã', payout: 3},
    {emoji: 'üçä', payout: 4},
    {emoji: 'üçâ', payout: 5},
    {emoji: '‚≠ê', payout: 8},
    {emoji: 'üíé', payout: 10},
  ];

  const reels = [
    document.getElementById('reel1'),
    document.getElementById('reel2'),
    document.getElementById('reel3'),
  ];

  // Utility: random symbol from symbols
  function randomSymbol() {
    return symbols[Math.floor(Math.random() * symbols.length)];
  }

  // Animate reels spinning
  async function spinReels() {
    spinBtn.disabled = true;
    message.textContent = '';
    let spinRounds = 15;

    for(let i = 0; i < spinRounds; i++) {
      reels.forEach(reel => {
        const sym = randomSymbol();
        reel.textContent = sym.emoji;
        reel.dataset.symbol = sym.emoji;
      });
      await new Promise(r => setTimeout(r, 80 + i * 10));
    }

    // Final spin result
    const results = reels.map(r => r.dataset.symbol);

    // Check wins: all 3 match for payout
    let win = false;
    if(results[0] === results[1] && results[1] === results[2]) {
      win = true;
      let sym = symbols.find(s => s.emoji === results[0]);
      payout(win, sym.payout);
    } else {
      payout(win);
    }

    spinBtn.disabled = false;
  }

  // Handle payout and messages
  function payout(won, multiplier=0) {
    if(won) {
      const winAmount = spinCost * multiplier;
      balance += winAmount;
      message.textContent = `You won $${winAmount}! üéâ`;
      highlightWinningReels(true);
      rat.classList.add('wiggle');
      setTimeout(() => rat.classList.remove('wiggle'), 2000);
    } else {
      balance -= spinCost;
      message.textContent = `You lost $${spinCost}. Try again! üçÄ`;
      highlightWinningReels(false);
    }
    updateBalance();

    if(balance < spinCost) {
      spinBtn.disabled = true;
      message.textContent += ' Game Over! Reload to play again.';
    }
  }

  // Update balance display
  function updateBalance() {
    balanceDisplay.textContent = `Balance: $${balance}`;
  }

  // Highlight or reset reel backgrounds on win/loss
  function highlightWinningReels(win) {
    if(win) {
      reels.forEach(r => r.classList.add('winning'));
    } else {
      reels.forEach(r => r.classList.remove('winning'));
    }
  }

  // Bind spin button click
  spinBtn.addEventListener('click', () => {
    if(balance >= spinCost) {
      spinReels();
    }
  });

  updateBalance();

})();
</script>

</body>
</html>
